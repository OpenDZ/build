bus1 - System Build

DETAILS:
        https://github.com/bus1/build

BUG REPORTS:
        https://github.com/bus1/build/issues

GIT:
        git@github.com:bus1/build.git
        https://github.com/bus1/build.git

GITWEB:
        https://github.com/bus1/build

LICENSE:
        LGPLv2.1+ (LICENSE.LGPL2.1)
        See COPYING for details.

Example:
[kay@ank build]$ sudo make efi
src/install-$(. /etc/os-release; echo $ID).sh
Fedora rawhide - x86_64                                                                                                                                                            3.3 MB/s |  45 MB     00:13    
[...]
Install  105 Packages
Total download size: 62 M
Installed size: 284 M
[...]
Creating 4.0 filesystem on system.img, block size 131072.
[...]
src/build-initrd.sh
  GEN      efi-disk.img
Disk efi-disk.img: 1 GiB, 1073741824 bytes, 2097152 sectors
>>> Created a new GPT disklabel (GUID: 4830DA7F-B777-49E4-B26D-874331FEEC4D).
  Device          Start     End Sectors  Size Type
  efi-disk.img1    2048 1048575 1046528  511M EFI System
  efi-disk.img2 1048576 2095103 1046528  511M unknown
mkfs.fat 3.0.28 (2015-05-16)
/usr/bin/qemu-system-x86_64 -machine accel=kvm -m 1024 -bios /usr/share/qemu/bios-ovmf.bin -drive format=raw,file=efi-disk.img

login: root
bash-4.3# ls -l /
lrwxrwxrwx  1 root root    7 Nov 29 14:26 bin -> usr/bin
drwxr-xr-x  4 root root   32 Nov 29 14:26 bus1
drwxr-xr-x  8 root root 2840 Nov 29 14:26 dev
lrwxrwxrwx  1 root root    7 Nov 29 14:26 etc -> usr/etc
drwxr-xr-x  2 root root   60 Nov 29 14:26 lib64
dr-xr-xr-x 70 root root    0 Nov 29 14:26 proc
lrwxrwxrwx  1 root root    7 Nov 29 14:26 sbin -> usr/bin
dr-xr-xr-x 13 root root    0 Nov 29 14:26 sys
drwxr-xr-x  9 root root  150 Nov 28 12:54 usr
lrwxrwxrwx  1 root root    9 Nov 29 14:26 var -> bus1/data

bash-4.3# df -kh
Filesystem      Size  Used Avail Use% Mounted on
-               493M     0  493M   0% /
devtmpfs        493M     0  493M   0% /dev
/dev/sda2       508M  206M  302M  41% /bus1
/dev/loop0      180M  180M     0 100% /usr

bash-4.3# mount
devtmpfs on /dev type devtmpfs (rw,nosuid,size=504388k,nr_inodes=126097,mode=755)
devpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,mode=620,ptmxmode=000)
proc on /proc type proc (rw,nosuid,nodev,noexec,relatime)
sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)
bus1fs on /sys/fs/bus1 type bus1fs (rw,nosuid,noexec,relatime)
/dev/sda2 on /bus1 type xfs (rw,relatime,attr2,inode64,noquota)
/dev/loop0 on /usr type squashfs (ro,relatime)

bash-4.3# ps afx
  146 ?        S<     0:00  \_ [loop0]
  204 ?        S<     0:00  \_ [ttm_swap]
  206 ?        S      0:00  \_ [kauditd]
    1 ?        Ss     0:00 /usr/bin/org.bus1.init
  148 ?        Ss     0:00 /usr/bin/org.bus1.devices
  149 ?        Ss     0:00 login -- root
  207 tty1     Ss     0:00  \_ -bash
  225 tty1     R+     0:00      \_ ps afx
  150 ttyS0    Ss+    0:00 /usr/bin/agetty --nohostname --keep-baud 115200 38400 9600 ttyS0 linux
